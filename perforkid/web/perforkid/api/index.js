const express = require('express');
const cors = require('cors');
const path = require('path');
const fs = require('fs');

const app = express();

app.use(express.json());
app.use(cors());

const { signIn,
        signUp,
        signOut,
        createFirstPin,
        signInWithPin } = require('./authen.js');

const { getSchool, 
        getSchoolBySchoolName,
        sendEmail } = require('./school.js');

const { getTeacherInitialBySchoolNameAndEmail,
        getDriverInitialBySchoolNameAndEmail,
        getParentInitialBySchoolNameAndEmail } = require('./initial.js');

const { getAnnouncementBySchoolName,
        getAnnouncementBySchoolNameAndId } = require('./announcement.js');

const { getTeacherBySchoolName,
        getTeacherBySchoolNameAndTeacherEmail,
        getTeacherBySchoolNameAndTeacherId,
        getTeacherBySchoolNameAndClassRoom,
        getTeacherBySchoolNameAndTeachingRoom } = require('./teacher.js');

const { getDriverBySchoolName,
        getDriverBySchoolNameAndDriverEmail,
        getDriverBySchoolNameAndDriverId,
        getDriverBySchoolNameAndCarNumber } = require('./driver.js');

const { getStudentBySchoolName,
        getStudentBySchoolNameAndRoom,
        getRoomBySchoolName,
        getRoomBySchoolNameAndRoom } = require('./student.js');

const { getStudentCarBySchoolName,
        getStudentCarBySchoolNameAndCarNumber,
        getStudentCarBySchoolNameAndRoom,
        getStudentCarBySchoolNameAndId,
        getStudentCarBySchoolNameAndToken,
        updateStudentCarStatusBySchoolNameAndId } = require('./studentCar.js');

const { createParentCard,
        createVisitorCard,
        uploadParentImageBySchoolNameAndToken,
        getCardBySchoolNameAndCardTypeAndToken,
        getCardBySchoolNameAndCardType,
        getCardBySchoolNameAndCardTypeAndStudentName,
        getCardBySchoolNameAndCardId,
        deleteExpireCardBySchoolName,
        deleteExpireCard } = require('./card.js');

const { getAndCheckStudentAddress,
        setStudentQueue,
        getDirectionAndDistance,
        endOfTrip,
        getCarLocation,
        checkQueue } = require('./location.js');

const { getChildBySchoolNameAndToken,
        updateChildStatusBySchoolNameAndId } = require('./child.js');

const { webGetTeacherBySchoolName,
        webGetDriverBySchoolName,
        webGetStudentBySchoolNameAndStudentRoom,
        webGetStudentCarBySchoolNameAndCarNumber,
        initialStudentData,
        getImageBySchoolNameAndTypeAndId,
        validateForm } = require('./web.js');


// ? ===========================================================================================================================================================================
// authen

app.post('/authen/signIn', signIn);                                                                             // ‚úÖ sign in and generate token

app.post('/authen/signUp', signUp);                                                                             // ‚úÖ sign up

app.post('/authen/signOut', signOut);                                                                           // ‚ùåüîí sign out and revoke token
// ! token ‡πÅ‡∏°‡πâ‡∏ß‡πà‡∏≤‡∏à‡∏∞ revoke ‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏ï‡πà‡∏Å‡πá‡∏¢‡∏±‡∏á‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ

app.post('/authen/createFirstPin', createFirstPin);                                                             // ‚úÖüîí create first pin
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á pin ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å (‡πÄ‡∏°‡∏∑‡πà‡∏≠ login ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å)
// ! ‡πÄ‡∏°‡∏∑‡πà‡∏≠ login ‡∏à‡∏∞‡∏°‡∏µ message ‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤ login ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å ‡πÉ‡∏´‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á pin ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å

app.post('/authen/signInWithPin', signInWithPin);                                                               // ‚úÖüîí sign in with pin and generate new token
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÅ‡∏≠‡∏õ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£ ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà pin ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á



// ? ===========================================================================================================================================================================
// school

app.post('/school/getSchool', getSchool);                                                                       // ‚úÖ   get all school data 
// * ‡∏à‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô dropdown ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å school ‡∏ï‡∏≠‡∏ô‡∏™‡∏°‡∏±‡∏Ñ‡∏£

app.post('/school/getSchoolBySchoolName', getSchoolBySchoolName);                                               // ‚úÖüîí get School by ( schoolName )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô

app.post('/school/sendEmail', sendEmail);                                                                       // ‚úÖ send email to school (web)
// * ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á email ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á web



// ? ===========================================================================================================================================================================
// initial (‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ ‡∏ó‡∏≥‡πÑ‡∏ß‡πâ‡πÄ‡∏ú‡∏∑‡πà‡∏≠)

app.post('/initial/teacher/getTeacherInitialBySchoolNameAndEmail', getTeacherInitialBySchoolNameAndEmail);      // ‚úÖüîí‚úâÔ∏è get teacher data by ( schoolName, email )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞ email ‡∏Ç‡∏≠‡∏á user token ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô email ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏Å‡∏±‡∏ö req ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏£‡∏π (‡∏ó‡∏≥‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡πÑ‡∏ß‡πâ)

app.post('/initial/driver/getDriverInitialBySchoolNameAndEmail', getDriverInitialBySchoolNameAndEmail);         // ‚úÖüîí‚úâÔ∏è get driver data by ( schoolName, email )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞ email ‡∏Ç‡∏≠‡∏á user token ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô email ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏Å‡∏±‡∏ö req ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏£‡∏π (‡∏ó‡∏≥‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡πÑ‡∏ß‡πâ)

app.post('/initial/parent/getParentInitialBySchoolNameAndEmail', getParentInitialBySchoolNameAndEmail);         // ‚úÖüîí‚úâÔ∏è get student data by ( schoolName, email )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞ email ‡∏Ç‡∏≠‡∏á user token ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô email ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏Å‡∏±‡∏ö req ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏£‡∏π (‡∏ó‡∏≥‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡πÑ‡∏ß‡πâ)



// ? ===========================================================================================================================================================================
// announcement

app.post('/announcement/getAnnouncementBySchoolName', getAnnouncementBySchoolName);                             // ‚úÖüîí get all announcement data by ( schoolName )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏Ç‡∏≠‡∏á‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô

app.post('/announcement/getAnnouncementBySchoolNameAndId', getAnnouncementBySchoolNameAndId);                   // ‚úÖüîí get announcement data by ( schoolName, Id )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏Ç‡∏≠‡∏á‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡πÅ‡∏ö‡∏ö‡∏£‡∏∞‡∏ö‡∏∏‡πÑ‡∏≠‡∏î‡∏µ



// ? ===========================================================================================================================================================================
// teacher

app.post('/teacher/getTeacherBySchoolName', getTeacherBySchoolName);                                            // ‚úÖüîí get all teacher data by ( schoolName )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏£‡∏π‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡πÉ‡∏ô‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô

app.post('/teacher/getTeacherBySchoolNameAndTeacherEmail', getTeacherBySchoolNameAndTeacherEmail);              // ‚úÖüîí get teacher data by ( schoolName, teacherEmail )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏£‡∏π ‡πÇ‡∏î‡∏¢‡∏£‡∏∞‡∏ö‡∏∏ email

app.post('/teacher/getTeacherBySchoolNameAndTeacherId', getTeacherBySchoolNameAndTeacherId);                    // ‚úÖüîí get teacher data by ( schoolName, teacherId )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏£‡∏π ‡πÇ‡∏î‡∏¢‡∏£‡∏∞‡∏ö‡∏∏ id

app.post('/teacher/getTeacherBySchoolNameAndClassRoom', getTeacherBySchoolNameAndClassRoom);                    // ‚úÖüîí get all teacher data by ( schoolName, classRoom )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏£‡∏π‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡πÉ‡∏ô‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ä‡∏±‡πâ‡∏ô‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏µ‡πâ

app.post('/teacher/getTeacherBySchoolNameAndTeachingRoom', getTeacherBySchoolNameAndTeachingRoom);              // ‚úÖüîí get all teacher data by ( schoolName, teachingRoom )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏£‡∏π‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡πÉ‡∏ô‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏ô‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏µ‡πâ



// ? ===========================================================================================================================================================================
// driver

app.post('/driver/getDriverBySchoolName', getDriverBySchoolName);                                               // ‚úÖüîí get all driver data by ( schoolName )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡πÉ‡∏ô‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô

app.post('/driver/getDriverBySchoolNameAndDriverEmail', getDriverBySchoolNameAndDriverEmail);                   // ‚úÖüîí get driver data by ( schoolName, driverEmail )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ ‡πÇ‡∏î‡∏¢‡∏£‡∏∞‡∏ö‡∏∏ email

app.post('/driver/getDriverBySchoolNameAndDriverId', getDriverBySchoolNameAndDriverId);                         // ‚úÖüîí get driver data by ( schoolName, driverId )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ ‡πÇ‡∏î‡∏¢‡∏£‡∏∞‡∏ö‡∏∏ id

app.post('/driver/getDriverBySchoolNameAndCarNumber', getDriverBySchoolNameAndCarNumber);                       // ‚úÖüîí get driver data by ( schoolName, carNumber )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ ‡πÇ‡∏î‡∏¢‡∏£‡∏∞‡∏ö‡∏∏ carNumber



// ? ===========================================================================================================================================================================
// student , room

app.post('/student/getStudentBySchoolName', getStudentBySchoolName);                                            // ‚úÖüîí get all student data by ( schoolName )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡πÉ‡∏ô‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô

app.post('/student/getStudentBySchoolNameAndRoom', getStudentBySchoolNameAndRoom);                              // ‚úÖüîí get all student data by ( schoolName, studentRoom )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡πÉ‡∏ô‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡πÇ‡∏î‡∏¢‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡πâ‡∏≠‡∏á

app.post('/room/getRoomBySchoolName', getRoomBySchoolName);                                                     // ‚úÖüîí get all room name by ( schoolName )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô

app.post('/room/getRoomBySchoolNameAndRoom', getRoomBySchoolNameAndRoom);                                       // ‚úÖüîí get room data by ( schoolName, studentRoom )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÉ‡∏ô‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡πÇ‡∏î‡∏¢‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡πâ‡∏≠‡∏á



// ? ===========================================================================================================================================================================
// studentCar , car

app.post('/studentCar/getStudentCarBySchoolName', getStudentCarBySchoolName);                                   // ‚úÖüîí get all student car data by ( schoolName )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏£‡∏ñ‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡πÉ‡∏ô‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô

app.post('/studentCar/getStudentCarBySchoolNameAndCarNumber', getStudentCarBySchoolNameAndCarNumber);           // ‚úÖüîí get all student car data by ( schoolName, carNumber )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏£‡∏ñ‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡πÉ‡∏ô‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡πÇ‡∏î‡∏¢‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏ñ

app.post('/studentCar/getStudentCarBySchoolNameAndRoom', getStudentCarBySchoolNameAndRoom);                     // ‚úÖüîí get all student car data by ( schoolName, studentRoom )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏£‡∏ñ‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡πÉ‡∏ô‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡πÇ‡∏î‡∏¢‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô

app.post('/studentCar/getStudentCarBySchoolNameAndId', getStudentCarBySchoolNameAndId);                         // ‚úÖüîí get student car data by ( schoolName, studentId )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏£‡∏ñ‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á ‡πÇ‡∏î‡∏¢‡∏£‡∏∞‡∏ö‡∏∏ id

app.post('/studentCar/getStudentCarBySchoolNameAndToken', getStudentCarBySchoolNameAndToken);                   // ‚úÖüîí get student car data by ( schoolName, token )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏£‡∏ñ‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á ‡πÇ‡∏î‡∏¢‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á token

app.post('/studentCar/updateStudentCarStatusBySchoolNameAndId', updateStudentCarStatusBySchoolNameAndId);       // ‚úÖüîí update student car status by ( schoolName, studentId, goStatus, backStatus )              
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó status ‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏£‡∏ñ‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á ‡πÇ‡∏î‡∏¢‡∏£‡∏∞‡∏ö‡∏∏ id ‡πÅ‡∏•‡∏∞ status ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó
// ! goStatus ‡∏°‡∏µ ‡∏°‡∏≤‡∏Å‡∏±‡∏ö‡∏£‡∏ñ‡∏ï‡∏π‡πâ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô, ‡∏°‡∏≤‡∏Å‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á, ‡πÑ‡∏°‡πà‡∏°‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
// ! backStatus ‡∏°‡∏µ ‡∏Å‡∏•‡∏±‡∏ö‡∏Å‡∏±‡∏ö‡∏£‡∏ñ‡∏ï‡∏π‡πâ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô, ‡∏Å‡∏•‡∏±‡∏ö‡∏Å‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á, ‡πÑ‡∏°‡πà‡∏°‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô



// ? ===========================================================================================================================================================================
// card

app.post('/card/createParentCard', createParentCard);                                                           // ‚úÖüîí‚úâÔ∏è create parent card ( schoolName, parentEmail, parentName, studentId, parentImage )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞ email ‡∏Ç‡∏≠‡∏á user token ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô email ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏Å‡∏±‡∏ö req ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ï‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á

app.post('/card/createVisitorCard', createVisitorCard);                                                         // ‚úÖüîí‚úâÔ∏è create visitor card ( schoolName, visitorName ,parentEmail, parentName, studentId, visitorImage, description )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞ email ‡∏Ç‡∏≠‡∏á user token ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô email ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏Å‡∏±‡∏ö req ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ï‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏°‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÅ‡∏ó‡∏ô
// ! ‡∏£‡∏π‡∏õ‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô base64 ‡∏Å‡πà‡∏≠‡∏ô 

app.post('/card/uploadParentImageBySchoolNameAndToken', uploadParentImageBySchoolNameAndToken);                 // ‚úÖüîí upload image by ( schoolName )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á
// ! ‡∏£‡∏π‡∏õ‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô base64 ‡∏Å‡πà‡∏≠‡∏ô 

app.post('/card/getCardBySchoolNameAndCardTypeAndToken', getCardBySchoolNameAndCardTypeAndToken);               // ‚úÖüîí get all card data by ( schoolName, cardType ) and token
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏ö‡∏±‡∏ï‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏î‡∏¢‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á token ‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ö‡∏±‡∏ï‡∏£ (all, parent, visitor)

app.post('/card/getCardBySchoolNameAndCardType', getCardBySchoolNameAndCardType);                               // ‚úÖüîí get all card data by ( schoolName, cardType )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏ö‡∏±‡∏ï‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡πÇ‡∏î‡∏¢‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ö‡∏±‡∏ï‡∏£ (all, parent, visitor)

app.post('/card/getCardBySchoolNameAndCardTypeAndStudentName', getCardBySchoolNameAndCardTypeAndStudentName);   // ‚úÖüîí get all card data by ( schoolName, cardType, studentName )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏ö‡∏±‡∏ï‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡πÇ‡∏î‡∏¢‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ö‡∏±‡∏ï‡∏£ (all, parent, visitor) ‡πÅ‡∏•‡∏∞‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô

app.post('/card/getCardBySchoolNameAndCardId', getCardBySchoolNameAndCardId);                                   // ‚úÖüîí get card data by ( schoolName, cardId )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏ö‡∏±‡∏ï‡∏£ ‡πÇ‡∏î‡∏¢‡∏£‡∏∞‡∏ö‡∏∏ id

app.post('/card/deleteExpireCardBySchoolName', deleteExpireCardBySchoolName);                                   // ‚úÖüîí delete expire card by ( schoolName )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ö‡∏±‡∏ï‡∏£‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏°‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏

app.post('/card/deleteExpireCard', deleteExpireCard);                                                           // ‚úÖ delete expire card



// ? ===========================================================================================================================================================================
// location

app.post('/location/getAndCheckStudentAddress', getAndCheckStudentAddress);                                     // ‚úÖüîí get and check student address by ( schoolName, carNumber, originLat, originLng )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡πÇ‡∏î‡∏¢‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏ñ ‡πÅ‡∏•‡∏∞ ‡∏Ç‡∏≤‡πÑ‡∏õ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏•‡∏±‡∏ö

app.post('/location/setStudentQueue', setStudentQueue);                                                         // ‚úÖ   set student queue by ( schoolName, carNumber, goOrBack, studentId )   
// * ‡∏ô‡∏≥‡πÑ‡∏õ‡πÄ‡∏ã‡πá‡∏î queue ‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡πÇ‡∏î‡∏¢‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏ñ ‡πÅ‡∏•‡∏∞ ‡∏Ç‡∏≤‡πÑ‡∏õ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏•‡∏±‡∏ö ‡πÅ‡∏•‡∏∞ id ‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô

app.post('/location/getDirectionAndDistance', getDirectionAndDistance);                                         // ‚úÖ   get direction and distance by ( schoolName, carNumber, originLat, originLng )
// * ‡∏ô‡∏≥‡πÑ‡∏õ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á ‡πÇ‡∏î‡∏¢‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏ñ ‡πÅ‡∏•‡∏∞ ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô ‡πÅ‡∏•‡∏∞ ‡∏Ç‡∏≤‡πÑ‡∏õ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏•‡∏±‡∏ö

app.post('/location/endOfTrip', endOfTrip);                                                                     // ‚úÖ   end of trip by ( schoolName, carNumber )
// * ‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏™‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á ‡πÇ‡∏î‡∏¢‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏ñ ‡πÅ‡∏•‡∏∞ ‡∏Ç‡∏≤‡πÑ‡∏õ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏•‡∏±‡∏ö

app.post('/location/getCarLocation', getCarLocation);                                                           // ‚úÖ   get car location by ( schoolName, carNumber )
// * ‡∏ô‡∏≥‡πÑ‡∏õ‡∏î‡∏∂‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏£‡∏ñ ‡πÇ‡∏î‡∏¢‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏ñ

app.post('/location/checkQueue', checkQueue);
// * ‡∏ó‡∏≥‡∏°‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Ñ‡∏¥‡∏ß‡πÑ‡∏´‡∏ô ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ‡∏à‡∏£‡∏¥‡∏á


// ! driver ‡πÉ‡∏ä‡πâ getAndCheckStudentAddress -> (setStudentQueue) -> getDirectionAndDistance -> (endOfTrip)
// ! parent ‡πÉ‡∏ä‡πâ getCarLocation



// ? ===========================================================================================================================================================================
// child

app.post('/child/getChildBySchoolNameAndToken', getChildBySchoolNameAndToken);                                // ‚úÖüîí get child data by ( schoolName )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏π‡∏Å‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á

app.post('/child/updateChildStatusBySchoolNameAndId', updateChildStatusBySchoolNameAndId);                    // ‚úÖüîí update child status by ( schoolName, studentId, goStatus, backStatus )
// * ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ token ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó status ‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡πÇ‡∏î‡∏¢‡∏£‡∏∞‡∏ö‡∏∏ id ‡πÅ‡∏•‡∏∞ status ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó
// ! ‡∏°‡∏µ ‡∏°‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô, ‡πÑ‡∏°‡πà‡∏°‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô



// ? ===========================================================================================================================================================================
// web

app.post('/web/teacher/getTeacherBySchoolName', webGetTeacherBySchoolName);

app.post('/web/driver/getDriverBySchoolName', webGetDriverBySchoolName);

app.post('/web/student/getStudentBySchoolNameAndStudentRoom', webGetStudentBySchoolNameAndStudentRoom);

app.post('/web/studentCar/getStudentCarBySchoolNameAndCarNumber', webGetStudentCarBySchoolNameAndCarNumber);

app.post('/web/room/initialStudentData', initialStudentData); 

app.post('/image/getImageBySchoolNameAndTypeAndId', getImageBySchoolNameAndTypeAndId);

app.post('/web/validateForm', validateForm);



const PORT = process.env.PORT || 3000;



app.use('/api', express.static(path.join(__dirname, 'api')));
app.use('/authen', express.static(path.join(__dirname, '..', 'authen')));
app.use('/firebaseConfig', express.static(path.join(__dirname, '..', 'firebaseConfig')));
app.use('/module', express.static(path.join(__dirname, '..', 'module')));
app.use('/picture', express.static(path.join(__dirname, '..', 'picture')));
app.use('/style', express.static(path.join(__dirname, '..', 'style')));
app.use('/util', express.static(path.join(__dirname, '..', 'util')));

app.get('/', (req, res) => { 
        res.sendFile(path.join(__dirname, '..', 'AdminLanding.html'));
 })

app.get('/:page', (req, res) => {
        
        const { page } = req.params;
        console.log("Navigating to", page)
        const filePath = path.join(__dirname, '..', `${page}`);
      
        // Check if the requested HTML file exists
        fs.access(filePath, fs.constants.F_OK, (err) => {
          if (err) {
            // If the file doesn't exist, put 'html' to troubleshoot.
            res.sendFile(filePath + '.html')
          } else {
            // If the file exists, serve it
            res.sendFile(filePath);
          }
        });
      });

app.listen(PORT, () => {
  console.log(`Server is running on http://localhost:${PORT}`);
});